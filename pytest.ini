[pytest]
# Register custom markers so pytest does not warn about unknown markers.
# The "integration" marker is used to tag tests that require live Google
# credentials (OAuth tokens, Gmail API, Drive API).  These tests are skipped
# by default and are only run when opted in with:
#
#   pytest -m integration               # run ONLY integration tests
#   pytest -m ""                        # run ALL tests (unit + integration)
#
# In CI, the default run passes "-m not integration" so no Google secrets are
# needed.  A separate optional workflow job runs with "-m integration" and
# requires the GOOGLE_* secrets to be configured in the repository.
markers =
    integration: marks tests that require live Google credentials (deselected by default in CI)

# Deselect integration tests by default.  Override with:
#   pytest -m ""          to run everything
#   pytest -m integration to run only integration tests
addopts = -m "not integration"
