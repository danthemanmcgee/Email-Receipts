{% extends "base.html" %}
{% block title %}Statements â€” {{ card.display_name }} â€” Email Receipts{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>
    ğŸ’³ {{ card.display_name }}
    {% if card.last4 %}<span class="text-muted fs-5">****{{ card.last4 }}</span>{% endif %}
    â€” Statements
  </h2>
  <a href="/ui/settings" class="btn btn-outline-secondary btn-sm">â† Settings</a>
</div>

{% if statements %}
<div class="table-responsive">
  <table class="table table-hover table-sm">
    <thead class="table-dark">
      <tr>
        <th>File</th>
        <th>Format</th>
        <th>Transactions</th>
        <th>Imported</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for stmt in statements %}
      <tr>
        <td>{{ stmt.filename }}</td>
        <td><span class="badge bg-secondary">{{ stmt.format.upper() }}</span></td>
        <td>{{ stmt.row_count }}</td>
        <td class="text-muted small">{{ stmt.imported_at.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>
          <a href="/ui/cards/{{ card.id }}/statements/{{ stmt.id }}/reconcile"
             class="btn btn-sm btn-outline-primary">ğŸ”— Reconcile</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div class="alert alert-info">
  No statements imported yet. Import one via the
  <a href="/ui/settings">Settings â†’ Card Management</a> area or the API.
</div>
{% endif %}
{% endblock %}
